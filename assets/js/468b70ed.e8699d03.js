"use strict";(self.webpackChunksake=self.webpackChunksake||[]).push([[30],{900:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});var s=r(5893),a=r(1151);const o={},i="Error Handling",t={id:"error-handling",title:"Error Handling",description:"sake has multiple ways to deal with errors, and depending on the task execution strategy and which error flags are used, you will get different behavior. The following properties can be used to control task execution and how errors are handled:",source:"@site/../../sake/docs/error-handling.md",sourceDirName:".",slug:"/error-handling",permalink:"/error-handling",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Task Execution",permalink:"/task-execution"},next:{title:"Variables",permalink:"/variables"}},l={},c=[{value:"Aborting on the First Error",id:"aborting-on-the-first-error",level:2},{value:"Ignoring Task Errors",id:"ignoring-task-errors",level:2},{value:"Ignoring Unreachable Hosts",id:"ignoring-unreachable-hosts",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"sake"})," has multiple ways to deal with errors, and depending on the task execution strategy and which error flags are used, you will get different behavior. The following properties can be used to control task execution and how errors are handled:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"any_errors_fatal"}),": stop task execution on all servers on error, this is the same as setting ",(0,s.jsx)(n.code,{children:"max_fail_percentage"})," to zero","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"note that when you run tasks in parallel, it will wait for the current tasks to finish before aborting"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"max_fail_percentage"}),": stop task execution on all servers when threshold reached"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ignore_errors"}),": continue task execution on errors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ignore_unreachable"}),": ignore unreachable hosts"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"aborting-on-the-first-error",children:"Aborting on the First Error"}),"\n",(0,s.jsxs)(n.p,{children:["If you wish to abort all tasks on all errors in case an error is encountered for any task, use the flag ",(0,s.jsx)(n.code,{children:"--any-errors-fatal"})," or specify it in the task ",(0,s.jsx)(n.code,{children:"spec"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"any-errors-fatal"})," set to false"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ sake run fatal --any-errors-fatal=false\n\nTASKS *******************************************************************\n\n Host       | Task-0 | Task-1                       | Task-2\n------------+--------+------------------------------+--------\n 172.24.2.2 | 123    |                              |\n            |        | Process exited with status 1 |\n------------+--------+------------------------------+--------\n 172.24.2.2 | 123    |                              |\n            |        | Process exited with status 1 |\n\nRECAP *******************************************************************\n\n 172.24.2.2      ok=1  unreachable=0  ignored=0  failed=1  skipped=1\n 172.24.2.2      ok=1  unreachable=0  ignored=0  failed=1  skipped=1\n---------------------------------------------------------------------\n Total           ok=2  unreachable=0  ignored=0  failed=2  skipped=2\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"any-errors-fatal"})," set to true"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ sake run fatal --any-errors-fatal=true\n\nTASKS ******************************************************************\n\n Host       | Task-0 | Task-1                       | Task-2\n------------+--------+------------------------------+--------\n 172.24.2.2 | 123    |                              |\n            |        | Process exited with status 1 |\n------------+--------+------------------------------+--------\n 172.24.2.2 |        |                              |\n\nRECAP ******************************************************************\n\n 172.24.2.2      ok=1  unreachable=0  ignored=0  failed=1  skipped=1\n 172.24.2.2      ok=0  unreachable=0  ignored=0  failed=0  skipped=3\n---------------------------------------------------------------------\n Total           ok=1  unreachable=0  ignored=0  failed=1  skipped=4\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"ignoring-task-errors",children:"Ignoring Task Errors"}),"\n",(0,s.jsxs)(n.p,{children:["If you wish to continue task execution even if an error is encountered, use the flag ",(0,s.jsx)(n.code,{children:"--ignore-errors"})," or specify it in the task ",(0,s.jsx)(n.code,{children:"spec"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ignore-errors"})," set to false"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ sake run errors --ignore-errors=false\n\nTASKS ******************************************************************\n\n Host       | Task-0 | Task-1                       | Task-2\n------------+--------+------------------------------+--------\n 172.24.2.2 | 123    |                              |\n            |        | Process exited with status 1 |\n------------+--------+------------------------------+--------\n 172.24.2.2 | 123    |                              |\n            |        | Process exited with status 1 |\n\nRECAP ******************************************************************\n\n 172.24.2.2      ok=1  unreachable=0  ignored=0  failed=1  skipped=1\n 172.24.2.2      ok=1  unreachable=0  ignored=0  failed=1  skipped=1\n---------------------------------------------------------------------\n Total           ok=2  unreachable=0  ignored=0  failed=2  skipped=2\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ignore-errors"})," set to true"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ sake run errors --ignore-errors=true\n\nTASKS ********************************************************************\n\n Host       | Task-0 | Task-1                       | Task-2\n------------+--------+------------------------------+--------\n 172.24.2.2 | 123    |                              | 321\n            |        | Process exited with status 1 |\n------------+--------+------------------------------+--------\n 172.24.2.2 | 123    |                              | 321\n            |        | Process exited with status 1 |\n\nRECAP ********************************************************************\n\n 172.24.2.2      ok=2  unreachable=0  ignored=1  failed=0  skipped=0\n 172.24.2.2      ok=2  unreachable=0  ignored=1  failed=0  skipped=0\n---------------------------------------------------------------------\n Total           ok=4  unreachable=0  ignored=2  failed=0  skipped=0\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"ignoring-unreachable-hosts",children:"Ignoring Unreachable Hosts"}),"\n",(0,s.jsxs)(n.p,{children:["Sometimes you want to ignore remote hosts which are unreachable, for instance if it's a host that is flaky, then you can either use the ",(0,s.jsx)(n.code,{children:"--ignore-unreachable"})," flag or specify it in the task ",(0,s.jsx)(n.code,{children:"spec"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ignore-unreachable"})," set to false"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ sake run unreachable --ignore-unreachable=false\n\n                                     Unreachable Hosts\n\n Server | Host         | User | Port | Error\n--------+--------------+------+------+-----------------------------------------------------\n list-1 | 172.24.2.222 | test | 22   | dial tcp 172.24.2.222:22: connect: no route to host\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ignore-unreachable"})," set to false"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ sake run unreachable --ignore-unreachable=true\n\n                                     Unreachable Hosts\n\n Server | Host         | User | Port | Error\n--------+--------------+------+------+-----------------------------------------------------\n list-1 | 172.24.2.222 | test | 22   | dial tcp 172.24.2.222:22: connect: no route to host\n\nTASKS **************************************************************************************\n\n Host       | Task-0\n------------+--------\n 172.24.2.2 | 123\n\nRECAP **************************************************************************************\n\n 172.24.2.2        ok=1  unreachable=0  ignored=0  failed=0  skipped=0\n 172.24.2.222      ok=0  unreachable=1  ignored=0  failed=0  skipped=0\n-----------------------------------------------------------------------\n Total             ok=1  unreachable=1  ignored=0  failed=0  skipped=0\n\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>t,a:()=>i});var s=r(7294);const a={},o=s.createContext(a);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);