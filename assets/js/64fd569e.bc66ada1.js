"use strict";(self.webpackChunksake=self.webpackChunksake||[]).push([[747],{7949:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>t,metadata:()=>o,toc:()=>d});var r=s(5893),i=s(1151);const t={},l="Task Execution",o={id:"task-execution",title:"Task Execution",description:"Sake offers multiple execution strategies that controls how tasks are executed across the hosts. The available ones are:",source:"@site/../../sake/docs/task-execution.md",sourceDirName:".",slug:"/task-execution",permalink:"/task-execution",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Inventory",permalink:"/inventory"},next:{title:"Error Handling",permalink:"/error-handling"}},c={},d=[{value:"Linear Strategy",id:"linear-strategy",level:2},{value:"Host Pinned Strategy",id:"host-pinned-strategy",level:2},{value:"Free Strategy",id:"free-strategy",level:2},{value:"Ordering Hosts",id:"ordering-hosts",level:2},{value:"Confirm Before Running Tasks",id:"confirm-before-running-tasks",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"task-execution",children:"Task Execution"}),"\n",(0,r.jsx)(n.p,{children:"Sake offers multiple execution strategies that controls how tasks are executed across the hosts. The available ones are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"linear"}),": execute task for each host before proceeding to the next task (default)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"host_pinned"}),": executes tasks (serial) for a host before proceeding to the next host"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"free"}),": executes tasks without waiting for other tasks"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["You can set the strategy via the ",(0,r.jsx)(n.code,{children:"stragegy"})," property in a ",(0,r.jsx)(n.code,{children:"spec"})," definition or via a flag ",(0,r.jsx)(n.code,{children:"--strategy [option]"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Additionally, the following properties are available to further control task execution:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"batch"}),": number of hosts to run in parallel"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"batch_p"}),": percentage of hosts to run in parallel"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"forks"}),": max number of concurrent processes"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"linear-strategy",children:"Linear Strategy"}),"\n",(0,r.jsx)(n.p,{children:"When the following properties are set:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"strategy"}),": linear"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"batch"}),": 2"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"forks"}),": 10000"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Sake will execute according to the following image:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"linear",src:s(6309).Z+"",width:"355",height:"454"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Task ",(0,r.jsx)(n.code,{children:"T1"})," will run in parallel for hosts ",(0,r.jsx)(n.code,{children:"H1"})," and ",(0,r.jsx)(n.code,{children:"H2"})]}),"\n",(0,r.jsxs)(n.li,{children:["Task ",(0,r.jsx)(n.code,{children:"T1"})," will run for host ",(0,r.jsx)(n.code,{children:"H3"})]}),"\n",(0,r.jsxs)(n.li,{children:["Task ",(0,r.jsx)(n.code,{children:"T2"})," will run in parallel for hosts ",(0,r.jsx)(n.code,{children:"H1"})," and ",(0,r.jsx)(n.code,{children:"H2"})]}),"\n",(0,r.jsxs)(n.li,{children:["Task ",(0,r.jsx)(n.code,{children:"T2"})," will run for host ",(0,r.jsx)(n.code,{children:"H3"})]}),"\n",(0,r.jsxs)(n.li,{children:["Task ",(0,r.jsx)(n.code,{children:"T3"})," will run in parallel for hosts ",(0,r.jsx)(n.code,{children:"H1"})," and ",(0,r.jsx)(n.code,{children:"H2"})]}),"\n",(0,r.jsxs)(n.li,{children:["Task ",(0,r.jsx)(n.code,{children:"T3"})," will run for host ",(0,r.jsx)(n.code,{children:"H3"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"host-pinned-strategy",children:"Host Pinned Strategy"}),"\n",(0,r.jsx)(n.p,{children:"When the following properties are set:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"strategy"}),": host_pinned"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"batch"}),": 2"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"forks"}),": 10000"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Sake will execute according to the following image:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"linear",src:s(8401).Z+"",width:"326",height:"412"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Tasks ",(0,r.jsx)(n.code,{children:"T1 - T3"})," will run serially for ",(0,r.jsx)(n.code,{children:"H1"})," and ",(0,r.jsx)(n.code,{children:"H2"})," (in parallel)"]}),"\n",(0,r.jsxs)(n.li,{children:["Tasks ",(0,r.jsx)(n.code,{children:"T1 - T3"})," will run serially for ",(0,r.jsx)(n.code,{children:"H3"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"free-strategy",children:"Free Strategy"}),"\n",(0,r.jsx)(n.p,{children:"When the following properties are set:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"strategy"}),": free"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"batch_p"}),": 100%"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"forks"}),": 10000"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Sake will execute according to the following image:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"linear",src:s(4506).Z+"",width:"366",height:"358"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"All tasks for all hosts will run in parallel"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"ordering-hosts",children:"Ordering Hosts"}),"\n",(0,r.jsx)(n.p,{children:"There are multiple host ordering options available:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"inventory"}),": the order is as provided by the inventory"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"reverse_inventory"}),": the order is the reverse of the inventory"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"sorted"}),": hosts are alphabetically sorted by host"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"reverse_sorted"}),": hosts are sorted by host in reverse alphabetical order"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"random"}),": hosts are randomly ordered"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"confirm-before-running-tasks",children:"Confirm Before Running Tasks"}),"\n",(0,r.jsx)(n.p,{children:"sake comes with two options to confirm tasks before execution:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"confirm"}),": this property is used when you want to simply confirm the task you invoked before running","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["it can be specified either via flag ",(0,r.jsx)(n.code,{children:"--confirm"})," or the spec property ",(0,r.jsx)(n.code,{children:"confirm"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"step"}),": this property is used when you want to confirm each task individually","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["it can be specified either via flag ",(0,r.jsx)(n.code,{children:"--step"})," or the spec property ",(0,r.jsx)(n.code,{children:"step"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Invoking ",(0,r.jsx)(n.code,{children:"--step"})," will provide the user 3 options:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"yes"}),": run the task"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"no"}),": skip the task"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"continue"}),": run the task and don't prompt for the next tasks"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},4506:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/free-strategy-b6443b3da89b88d510d1a0c24b1acb65.png"},8401:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/host_pinned-strategy-fe5dd76bbc85027cfcf451c0d7287737.png"},6309:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/linear-strategy-302ff283bf39a73a9c0ecee57b008faf.png"},1151:(e,n,s)=>{s.d(n,{Z:()=>o,a:()=>l});var r=s(7294);const i={},t=r.createContext(i);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);